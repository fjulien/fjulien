---
import MainHead from "../components/MainHead.astro";
import Footer from "../components/Footer.astro";
import Nav from "../components/Nav.astro";
import PortfolioPreview from "../components/PortfolioPreview.astro";
import type { Project } from "../types";
import Layout from "../components/Layout.astro";

const projects = (await Astro.glob<Project>("./project/**/*.md"))
	.filter(({ frontmatter }) => !!frontmatter.publishDate)
	.sort(
		(a, b) =>
			new Date(b.frontmatter.publishDate).valueOf() -
			new Date(a.frontmatter.publishDate).valueOf()
	);
---

<Layout>
	<div class="wrapper">
		<h1 class="title">All Projects</h1>
		<div class="grid">
			{projects.map((project) => <PortfolioPreview project={project} />)}
		</div>
	</div>
</Layout>
<style>
	.grid {
		display: grid;
		grid-gap: 3rem;
	}
	.title {
		margin-top: 2rem;
		margin-bottom: 2rem;
	}
</style>
